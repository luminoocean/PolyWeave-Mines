:root{
  --bg-0:#071021;
  --panel:linear-gradient(180deg,#0b1220,#071021);
  --accent:#3ec7ff;
  --text:#dcefff;
  --sub:#9fb4c8;
  --muted:rgba(255,255,255,0.03);
  --select-bg:#0b1220;
  --select-text:#dcefff;
  --transition-fast: 160ms cubic-bezier(.2,.9,.2,1);
  --transition-med: 280ms cubic-bezier(.2,.9,.2,1);
}

/* Basic layout + utility */
body{ margin:0; font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial; background:var(--bg-0); color:var(--text); height:100vh; display:flex; flex-direction:column; }
.no-select{ -webkit-user-select:none; -ms-user-select:none; user-select:none; }
.controls{ display:flex; gap:12px; padding:12px; align-items:center; background:var(--panel); box-shadow:0 6px 18px rgba(0,0,0,0.45); }
.control-group{ display:flex; gap:6px; align-items:center; }
.ms-btn{ background:transparent; color:var(--text); border:1px solid rgba(255,255,255,0.04); padding:6px 10px; border-radius:6px; cursor:pointer; transition: transform var(--transition-fast), background var(--transition-fast), box-shadow var(--transition-fast); }
.ms-btn.primary{ background:linear-gradient(180deg,var(--accent), #2fb1e6); color:#06121a; border:none; }
.ms-btn:active{ transform:translateY(1px) scale(0.996); }
#msStatus{ padding:6px 8px; border-radius:6px; background:rgba(255,255,255,0.02); color:var(--sub); }

/* Timer */
#msTimer{ padding:6px 8px; border-radius:6px; background:rgba(255,255,255,0.02); color:var(--accent); min-width:48px; text-align:center; }

/* Minefield frame */
.minefield-window{ padding:12px; display:flex; justify-content:center; flex:1; }
.minefield-frame{ width:100%; max-width:1100px; height:calc(100vh - 160px); background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent); border-radius:10px; overflow:hidden; position:relative; outline:none; }
.minefield-container{ width:100%; height:100%; transform-origin:center center; transition: transform var(--transition-med) ease; }

/* SVG: cell-level animation helpers */
/* Each polygon is a tile; we animate 'transform' & 'fill' and use an adjacent <text> for label */
svg { width:100%; height:100%; display:block; }
svg polygon{
  transition: fill var(--transition-fast), transform var(--transition-fast), opacity var(--transition-fast);
  transform-origin:center center;
  opacity:1;
  will-change:transform,opacity,fill;
  filter: drop-shadow(0 2px 2px rgba(0,0,0,0.35));
}
/* small hover scale */
svg polygon:hover{ transform: scale(1.03); stroke-width:1.5; }

/* revealed animation */
svg polygon.revealing{ transform: scale(0.98); opacity:0; }
svg polygon.revealed{ transform: scale(1); opacity:1; transition: transform 300ms cubic-bezier(.2,.9,.2,1), opacity 220ms ease, fill 220ms linear; }

/* cascade class: delay is applied inline by JS */
svg text{ transition: fill var(--transition-fast), transform var(--transition-fast); font-weight:600; transform-origin:center center; }

/* flag animation */
svg polygon.flagging{ transform: rotate(-8deg) scale(0.96); transition: transform 320ms cubic-bezier(.2,.9,.2,1); }
svg text.flagging{ transform: rotate(6deg) scale(0.9); transition: transform 300ms cubic-bezier(.25,.9,.2,1); }

/* number pop */
svg text.pop{ animation: popIn 360ms cubic-bezier(.2,.9,.2,1); }
@keyframes popIn{ 0%{ transform:translateY(6px) scale(0.9); opacity:0 } 60%{ transform:translateY(-4px) scale(1.06); opacity:1 } 100%{ transform:translateY(0) scale(1); opacity:1 } }

/* win wave */
.win-wave {
  animation: winWave 900ms ease-out;
}
@keyframes winWave {
  0%{ transform: translateY(-10px) scale(0.98); opacity:0.0; filter: blur(6px); }
  60%{ transform: translateY(0) scale(1.02); opacity:1; filter: blur(0); }
  100%{ transform: translateY(0) scale(1); opacity:1; filter: none; }
}

/* modal + win overlay */
.modal{ position:fixed; inset:0; display:none; align-items:center; justify-content:center; z-index:400; }
.modal[aria-hidden="false"]{ display:flex; }
.modal-sheet{ background:var(--panel); border-radius:10px; padding:8px; min-width:520px; max-width:90%; color:var(--text); }
.modal-sheet.small{ width:420px; }
.win-sheet{ transition: transform 320ms var(--transition-fast), opacity 220ms ease; }
.win-title{ color:var(--accent); font-size:20px; }
.win-sub{ color:var(--sub); }

/* adjacency editor */
.editor-grid{ display:grid; gap:2px; grid-template-columns: repeat(15, 18px); }
.editor-cell{ width:18px; height:18px; background:rgba(255,255,255,0.02); border-radius:4px; display:flex; align-items:center; justify-content:center; cursor:pointer; transition: background 140ms ease, transform 140ms ease; }
.editor-cell.on{ background:var(--accent); transform:scale(1.06); color:#06121a; }
.editor-centre{ background:rgba(255,255,255,0.03); }

/* small tweaks */
@media (max-width:800px){ .controls{ flex-wrap:wrap; } .minefield-frame{ height:60vh; } }
